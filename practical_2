library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

-- This design implements a 4-bit shift register
-- sel = "11" → parallel load
-- sel = "01" → shift left (insert sl_in)
-- sel = "10" → shift right (insert sr_in)
-- sel = others → hold

entity shiftregister is
    Port (
        clk     : in  STD_LOGIC;
        reset   : in  STD_LOGIC;
        datain  : in  STD_LOGIC_VECTOR (3 downto 0);
        sel     : in  STD_LOGIC_VECTOR (1 downto 0);
        sl_in   : in  STD_LOGIC;
        sr_in   : in  STD_LOGIC;
        dataout : out STD_LOGIC_VECTOR (3 downto 0)
    );
end shiftregister;

architecture Behavioral of shiftregister is
    signal temp : STD_LOGIC_VECTOR(3 downto 0) := (others => '0');
begin
    process (clk, reset)
    begin
        if reset = '1' then
            temp <= (others => '0');

        elsif rising_edge(clk) then
            case sel is
                when "11" => temp <= datain;                     -- Parallel load
                when "01" => temp <= temp(2 downto 0) & sl_in;   -- Shift left
                when "10" => temp <= sr_in & temp(3 downto 1);   -- Shift right
                when others => temp <= temp;                      -- Hold
            end case;
        end if;
    end process;

    dataout <= temp;
end Behavioral;
